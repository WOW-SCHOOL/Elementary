<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
/>
  <title>WOW SCHOOL — English File: Elementary</title>

  <!-- OpenGraph/Preview — позволяет виджету и мессенджерам подтянуть обложку -->
  <meta property="og:title" content="WOW SCHOOL — English File: Elementary">
  <meta property="og:type"  content="website">
  <meta property="og:image" content="https://wow-school.github.io/Elementary/cover.jpg">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="image_src" href="https://wow-school.github.io/Elementary/cover.jpg">

  <link rel="preload" as="image" href="cover.jpg">
  <link rel="stylesheet" href="style.css?v=3">

  <!-- Ничего в логике плеера не меняем: ниже твой же скрипт загрузки плейлиста -->
</head>
<body class="is-splash"> <!-- стартуем с обложкой -->
  <!-- Слой-обложка (splash). Показывается сразу в iFrame/Miro -->
  <div id="splash">
    <div class="splash__cover" role="img" aria-label="English File — Elementary cover"></div>
    <button id="splashPlay" class="splash__play" aria-label="Play">
      <svg viewBox="0 0 56 56" width="56" height="56" aria-hidden="true">
        <circle cx="28" cy="28" r="28" />
        <polygon points="22,16 42,28 22,40" />
      </svg>
    </button>
  </div>

  <!-- Весь твой плеер остаётся как есть; завернём в #app, чтобы масштабировать -->
  <div id="app">
    <header class="brand">
      <div class="brand__label">WOW SCHOOL</div>
      <h1 class="brand__title">English File: Elementary</h1>
    </header>

    <!-- ===== player layout (твоя разметка) ===== -->
    <main class="player-card">
      <section class="now">
        <div class="meta">
          <div class="track-title" id="trackTitle">—</div>
          <div class="track-sub"    id="trackSub">—</div>
        </div>

        <div class="progress">
          <div class="time" id="timeLeft">0:00</div>
          <input id="seek" type="range" min="0" max="100" value="0" />
          <div class="time" id="timeRight">0:00</div>
        </div>
      </section>

      <section class="list">
        <div class="list-head">
          <div id="albumTitle">EF4e Elementary SB 1.02</div>
          <div class="dur" id="totalDur">0:00 / 0:00</div>
        </div>

        <div id="trackList" class="tracks"></div>
      </section>
    </main>

    <!-- Транспорт — фиксируем к низу iFrame -->
    <footer class="transport" id="transport">
      <button id="prevBtn" class="btn circle" aria-label="Previous">‹</button>
      <button id="playBtn" class="btn circle primary" aria-label="Play/Pause">▶</button>
      <button id="nextBtn" class="btn circle" aria-label="Next">›</button>
    </footer>
  </div>

  <!-- ===== твои скрипты остаются; добавлен только небольшой “обёрточный” код ===== -->
  <script>
    // 1) Масштаб и базовый размер шрифта через query: ?zoom=1.25&fs=1.10
    (function applyZoom(){
      const p = new URLSearchParams(location.search);
      const z  = Math.max(0.5, Math.min(2.0, parseFloat(p.get('zoom') || '1')));
      const fs = Math.max(0.75, Math.min(1.5, parseFloat(p.get('fs')   || '1')));
      document.documentElement.style.setProperty('--z',  z);
      document.documentElement.style.setProperty('--fs', fs);
    })();

    // 2) Спрятать обложку при клике — запускаем плеер
    document.getElementById('splashPlay').addEventListener('click', () => {
      document.body.classList.remove('is-splash');
      // Инициируем клик на основную кнопку Play твоего плеера
      const playBtn = document.getElementById('playBtn');
      if (playBtn) playBtn.click();
    });

    // ====== ниже твоя логика плеера (загрузка плейлиста, воспроизведение, кнопки и т.д.) ======
    // НИЧЕГО НЕ МЕНЯЛ — оставь твои текущие скрипты/функции как есть
    // ------------------------------------------------------------------
    // пример включения твоего файла с логикой:
    // <script src="player.js"></script>
  </script>
</body>
</html>
